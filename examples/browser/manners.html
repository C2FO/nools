<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manners</title>
</head>
<body onload="init()">

<div id="output"></div>

<script type="text/javascript" src="../../nools.js"></script>
<script type="text/javascript" src="./rules/manners.js"></script>
<script type="text/javascript">
function init() {
    var guests64 = [
        {"name": "1", "sex": "m", "hobby": "h2"},
        {"name": "1", "sex": "m", "hobby": "h1"},
        {"name": "1", "sex": "m", "hobby": "h3"},
        {"name": "2", "sex": "f", "hobby": "h2"},
        {"name": "2", "sex": "f", "hobby": "h1"},
        {"name": "2", "sex": "f", "hobby": "h3"},
        {"name": "3", "sex": "m", "hobby": "h3"},
        {"name": "3", "sex": "m", "hobby": "h2"},
        {"name": "4", "sex": "m", "hobby": "h3"},
        {"name": "4", "sex": "m", "hobby": "h2"},
        {"name": "4", "sex": "m", "hobby": "h1"},
        {"name": "5", "sex": "m", "hobby": "h2"},
        {"name": "5", "sex": "m", "hobby": "h1"},
        {"name": "5", "sex": "m", "hobby": "h3"},
        {"name": "6", "sex": "m", "hobby": "h2"},
        {"name": "6", "sex": "m", "hobby": "h3"},
        {"name": "6", "sex": "m", "hobby": "h1"},
        {"name": "7", "sex": "f", "hobby": "h1"},
        {"name": "7", "sex": "f", "hobby": "h2"},
        {"name": "7", "sex": "f", "hobby": "h3"},
        {"name": "8", "sex": "m", "hobby": "h3"},
        {"name": "8", "sex": "m", "hobby": "h1"},
        {"name": "9", "sex": "m", "hobby": "h2"},
        {"name": "9", "sex": "m", "hobby": "h3"},
        {"name": "9", "sex": "m", "hobby": "h1"},
        {"name": "10", "sex": "m", "hobby": "h3"},
        {"name": "10", "sex": "m", "hobby": "h2"},
        {"name": "10", "sex": "m", "hobby": "h1"},
        {"name": "11", "sex": "m", "hobby": "h1"},
        {"name": "11", "sex": "m", "hobby": "h3"},
        {"name": "11", "sex": "m", "hobby": "h2"},
        {"name": "12", "sex": "f", "hobby": "h3"},
        {"name": "12", "sex": "f", "hobby": "h1"},
        {"name": "12", "sex": "f", "hobby": "h2"},
        {"name": "13", "sex": "m", "hobby": "h2"},
        {"name": "13", "sex": "m", "hobby": "h3"},
        {"name": "14", "sex": "m", "hobby": "h1"},
        {"name": "14", "sex": "m", "hobby": "h2"},
        {"name": "15", "sex": "m", "hobby": "h2"},
        {"name": "15", "sex": "m", "hobby": "h3"},
        {"name": "15", "sex": "m", "hobby": "h1"},
        {"name": "16", "sex": "f", "hobby": "h2"},
        {"name": "16", "sex": "f", "hobby": "h3"},
        {"name": "17", "sex": "f", "hobby": "h3"},
        {"name": "17", "sex": "f", "hobby": "h2"},
        {"name": "18", "sex": "m", "hobby": "h1"},
        {"name": "18", "sex": "m", "hobby": "h3"},
        {"name": "18", "sex": "m", "hobby": "h2"},
        {"name": "19", "sex": "f", "hobby": "h3"},
        {"name": "19", "sex": "f", "hobby": "h1"},
        {"name": "20", "sex": "f", "hobby": "h1"},
        {"name": "20", "sex": "f", "hobby": "h3"},
        {"name": "20", "sex": "f", "hobby": "h2"},
        {"name": "21", "sex": "m", "hobby": "h2"},
        {"name": "21", "sex": "m", "hobby": "h3"},
        {"name": "22", "sex": "m", "hobby": "h2"},
        {"name": "22", "sex": "m", "hobby": "h3"},
        {"name": "23", "sex": "f", "hobby": "h1"},
        {"name": "23", "sex": "f", "hobby": "h2"},
        {"name": "24", "sex": "f", "hobby": "h3"},
        {"name": "24", "sex": "f", "hobby": "h1"},
        {"name": "24", "sex": "f", "hobby": "h2"},
        {"name": "25", "sex": "f", "hobby": "h3"},
        {"name": "25", "sex": "f", "hobby": "h1"},
        {"name": "25", "sex": "f", "hobby": "h2"},
        {"name": "26", "sex": "m", "hobby": "h2"},
        {"name": "26", "sex": "m", "hobby": "h1"},
        {"name": "26", "sex": "m", "hobby": "h3"},
        {"name": "27", "sex": "f", "hobby": "h2"},
        {"name": "27", "sex": "f", "hobby": "h3"},
        {"name": "27", "sex": "f", "hobby": "h1"},
        {"name": "28", "sex": "m", "hobby": "h1"},
        {"name": "28", "sex": "m", "hobby": "h2"},
        {"name": "29", "sex": "f", "hobby": "h2"},
        {"name": "29", "sex": "f", "hobby": "h3"},
        {"name": "29", "sex": "f", "hobby": "h1"},
        {"name": "30", "sex": "f", "hobby": "h2"},
        {"name": "30", "sex": "f", "hobby": "h1"},
        {"name": "30", "sex": "f", "hobby": "h3"},
        {"name": "31", "sex": "m", "hobby": "h1"},
        {"name": "31", "sex": "m", "hobby": "h2"},
        {"name": "31", "sex": "m", "hobby": "h3"},
        {"name": "32", "sex": "m", "hobby": "h1"},
        {"name": "32", "sex": "m", "hobby": "h2"},
        {"name": "33", "sex": "m", "hobby": "h2"},
        {"name": "33", "sex": "m", "hobby": "h3"},
        {"name": "33", "sex": "m", "hobby": "h1"},
        {"name": "34", "sex": "f", "hobby": "h2"},
        {"name": "34", "sex": "f", "hobby": "h1"},
        {"name": "34", "sex": "f", "hobby": "h3"},
        {"name": "35", "sex": "f", "hobby": "h2"},
        {"name": "35", "sex": "f", "hobby": "h3"},
        {"name": "36", "sex": "m", "hobby": "h2"},
        {"name": "36", "sex": "m", "hobby": "h1"},
        {"name": "37", "sex": "m", "hobby": "h2"},
        {"name": "37", "sex": "m", "hobby": "h1"},
        {"name": "38", "sex": "f", "hobby": "h1"},
        {"name": "38", "sex": "f", "hobby": "h3"},
        {"name": "38", "sex": "f", "hobby": "h2"},
        {"name": "39", "sex": "m", "hobby": "h3"},
        {"name": "39", "sex": "m", "hobby": "h1"},
        {"name": "39", "sex": "m", "hobby": "h2"},
        {"name": "40", "sex": "f", "hobby": "h1"},
        {"name": "40", "sex": "f", "hobby": "h2"},
        {"name": "40", "sex": "f", "hobby": "h3"},
        {"name": "41", "sex": "m", "hobby": "h2"},
        {"name": "41", "sex": "m", "hobby": "h1"},
        {"name": "41", "sex": "m", "hobby": "h3"},
        {"name": "42", "sex": "m", "hobby": "h3"},
        {"name": "42", "sex": "m", "hobby": "h1"},
        {"name": "43", "sex": "m", "hobby": "h1"},
        {"name": "43", "sex": "m", "hobby": "h3"},
        {"name": "43", "sex": "m", "hobby": "h2"},
        {"name": "44", "sex": "m", "hobby": "h3"},
        {"name": "44", "sex": "m", "hobby": "h1"},
        {"name": "44", "sex": "m", "hobby": "h2"},
        {"name": "45", "sex": "m", "hobby": "h1"},
        {"name": "45", "sex": "m", "hobby": "h2"},
        {"name": "46", "sex": "f", "hobby": "h1"},
        {"name": "46", "sex": "f", "hobby": "h2"},
        {"name": "46", "sex": "f", "hobby": "h3"},
        {"name": "47", "sex": "m", "hobby": "h1"},
        {"name": "47", "sex": "m", "hobby": "h2"},
        {"name": "48", "sex": "f", "hobby": "h3"},
        {"name": "48", "sex": "f", "hobby": "h2"},
        {"name": "49", "sex": "m", "hobby": "h3"},
        {"name": "49", "sex": "m", "hobby": "h2"},
        {"name": "50", "sex": "m", "hobby": "h2"},
        {"name": "50", "sex": "m", "hobby": "h3"},
        {"name": "51", "sex": "f", "hobby": "h2"},
        {"name": "51", "sex": "f", "hobby": "h1"},
        {"name": "51", "sex": "f", "hobby": "h3"},
        {"name": "52", "sex": "m", "hobby": "h1"},
        {"name": "52", "sex": "m", "hobby": "h2"},
        {"name": "52", "sex": "m", "hobby": "h3"},
        {"name": "53", "sex": "f", "hobby": "h2"},
        {"name": "53", "sex": "f", "hobby": "h1"},
        {"name": "54", "sex": "f", "hobby": "h1"},
        {"name": "54", "sex": "f", "hobby": "h2"},
        {"name": "54", "sex": "f", "hobby": "h3"},
        {"name": "55", "sex": "f", "hobby": "h1"},
        {"name": "55", "sex": "f", "hobby": "h2"},
        {"name": "55", "sex": "f", "hobby": "h3"},
        {"name": "56", "sex": "f", "hobby": "h2"},
        {"name": "56", "sex": "f", "hobby": "h1"},
        {"name": "56", "sex": "f", "hobby": "h3"},
        {"name": "57", "sex": "f", "hobby": "h3"},
        {"name": "57", "sex": "f", "hobby": "h2"},
        {"name": "57", "sex": "f", "hobby": "h1"},
        {"name": "58", "sex": "f", "hobby": "h3"},
        {"name": "58", "sex": "f", "hobby": "h1"},
        {"name": "58", "sex": "f", "hobby": "h2"},
        {"name": "59", "sex": "f", "hobby": "h1"},
        {"name": "59", "sex": "f", "hobby": "h2"},
        {"name": "59", "sex": "f", "hobby": "h3"},
        {"name": "63", "sex": "f", "hobby": "h2"},
        {"name": "60", "sex": "f", "hobby": "h3"},
        {"name": "60", "sex": "f", "hobby": "h1"},
        {"name": "61", "sex": "f", "hobby": "h3"},
        {"name": "61", "sex": "f", "hobby": "h2"},
        {"name": "62", "sex": "f", "hobby": "h1"},
        {"name": "62", "sex": "f", "hobby": "h2"},
        {"name": "62", "sex": "f", "hobby": "h3"},
        {"name": "63", "sex": "f", "hobby": "h3"},
        {"name": "63", "sex": "f", "hobby": "h1"},
        {"name": "64", "sex": "f", "hobby": "h3"},
        {"name": "64", "sex": "f", "hobby": "h2"}
    ];

    var guests32 = [
        { name: 'n1', sex: 'm', hobby: 'h1' } ,
        { name: 'n1', sex: 'm', hobby: 'h3' } ,
        { name: 'n2', sex: 'f', hobby: 'h3' } ,
        { name: 'n2', sex: 'f', hobby: 'h2' } ,
        { name: 'n2', sex: 'f', hobby: 'h1' } ,
        { name: 'n3', sex: 'f', hobby: 'h1' } ,
        { name: 'n3', sex: 'f', hobby: 'h2' } ,
        { name: 'n4', sex: 'f', hobby: 'h3' } ,
        { name: 'n4', sex: 'f', hobby: 'h1' } ,
        { name: 'n5', sex: 'f', hobby: 'h1' } ,
        { name: 'n5', sex: 'f', hobby: 'h2' } ,
        { name: 'n6', sex: 'm', hobby: 'h1' } ,
        { name: 'n6', sex: 'm', hobby: 'h2' } ,
        { name: 'n6', sex: 'm', hobby: 'h3' } ,
        { name: 'n7', sex: 'f', hobby: 'h2' } ,
        { name: 'n7', sex: 'f', hobby: 'h1' } ,
        { name: 'n7', sex: 'f', hobby: 'h3' } ,
        { name: 'n8', sex: 'f', hobby: 'h1' } ,
        { name: 'n8', sex: 'f', hobby: 'h3' } ,
        { name: 'n8', sex: 'f', hobby: 'h2' } ,
        { name: 'n9', sex: 'f', hobby: 'h1' } ,
        { name: 'n9', sex: 'f', hobby: 'h3' } ,
        { name: 'n9', sex: 'f', hobby: 'h2' } ,
        { name: 'n10', sex: 'm', hobby: 'h2' },
        { name: 'n10', sex: 'm', hobby: 'h1' },
        { name: 'n11', sex: 'm', hobby: 'h2' },
        { name: 'n11', sex: 'm', hobby: 'h1' },
        { name: 'n12', sex: 'm', hobby: 'h3' },
        { name: 'n12', sex: 'm', hobby: 'h2' },
        { name: 'n13', sex: 'm', hobby: 'h1' },
        { name: 'n13', sex: 'm', hobby: 'h3' },
        { name: 'n14', sex: 'm', hobby: 'h3' },
        { name: 'n14', sex: 'm', hobby: 'h2' },
        { name: 'n15', sex: 'f', hobby: 'h2' },
        { name: 'n15', sex: 'f', hobby: 'h1' },
        { name: 'n15', sex: 'f', hobby: 'h3' },
        { name: 'n16', sex: 'f', hobby: 'h3' },
        { name: 'n16', sex: 'f', hobby: 'h2' },
        { name: 'n16', sex: 'f', hobby: 'h1' },
        { name: 'n17', sex: 'm', hobby: 'h3' },
        { name: 'n17', sex: 'm', hobby: 'h2' },
        { name: 'n18', sex: 'f', hobby: 'h2' },
        { name: 'n18', sex: 'f', hobby: 'h1' },
        { name: 'n19', sex: 'f', hobby: 'h1' },
        { name: 'n19', sex: 'f', hobby: 'h2' },
        { name: 'n19', sex: 'f', hobby: 'h3' },
        { name: 'n20', sex: 'f', hobby: 'h1' },
        { name: 'n20', sex: 'f', hobby: 'h2' },
        { name: 'n20', sex: 'f', hobby: 'h3' },
        { name: 'n21', sex: 'm', hobby: 'h2' },
        { name: 'n21', sex: 'm', hobby: 'h3' },
        { name: 'n21', sex: 'm', hobby: 'h1' },
        { name: 'n22', sex: 'f', hobby: 'h1' },
        { name: 'n22', sex: 'f', hobby: 'h2' },
        { name: 'n22', sex: 'f', hobby: 'h3' },
        { name: 'n23', sex: 'f', hobby: 'h3' },
        { name: 'n23', sex: 'f', hobby: 'h1' },
        { name: 'n23', sex: 'f', hobby: 'h2' },
        { name: 'n24', sex: 'm', hobby: 'h1' },
        { name: 'n24', sex: 'm', hobby: 'h3' },
        { name: 'n25', sex: 'f', hobby: 'h3' },
        { name: 'n25', sex: 'f', hobby: 'h2' },
        { name: 'n25', sex: 'f', hobby: 'h1' },
        { name: 'n26', sex: 'f', hobby: 'h3' },
        { name: 'n26', sex: 'f', hobby: 'h2' },
        { name: 'n26', sex: 'f', hobby: 'h1' },
        { name: 'n27', sex: 'm', hobby: 'h3' },
        { name: 'n27', sex: 'm', hobby: 'h1' },
        { name: 'n27', sex: 'm', hobby: 'h2' },
        { name: 'n28', sex: 'm', hobby: 'h3' },
        { name: 'n28', sex: 'm', hobby: 'h1' },
        { name: 'n29', sex: 'm', hobby: 'h3' },
        { name: 'n29', sex: 'm', hobby: 'h2' },
        { name: 'n29', sex: 'm', hobby: 'h1' },
        { name: 'n30', sex: 'm', hobby: 'h2' },
        { name: 'n30', sex: 'm', hobby: 'h1' },
        { name: 'n30', sex: 'm', hobby: 'h3' },
        { name: 'n31', sex: 'm', hobby: 'h2' },
        { name: 'n31', sex: 'm', hobby: 'h1' },
        { name: 'n32', sex: 'm', hobby: 'h1' },
        { name: 'n32', sex: 'm', hobby: 'h3' },
        ,
        { name: 'n32', sex: 'm', hobby: 'h2' }
    ];

    var guests16 = [
        { name: 'n1', sex: 'f', hobby: 'h3' },
        { name: 'n1', sex: 'f', hobby: 'h1' },
        { name: 'n1', sex: 'f', hobby: 'h2' },
        { name: 'n2', sex: 'f', hobby: 'h3' },
        { name: 'n2', sex: 'f', hobby: 'h2' },
        { name: 'n3', sex: 'm', hobby: 'h1' },
        { name: 'n3', sex: 'm', hobby: 'h3' },
        { name: 'n4', sex: 'm', hobby: 'h2' },
        { name: 'n4', sex: 'm', hobby: 'h1' },
        { name: 'n5', sex: 'm', hobby: 'h2' },
        { name: 'n5', sex: 'm', hobby: 'h3' },
        { name: 'n6', sex: 'm', hobby: 'h2' },
        { name: 'n6', sex: 'm', hobby: 'h1' },
        { name: 'n7', sex: 'f', hobby: 'h2' },
        { name: 'n7', sex: 'f', hobby: 'h1' },
        { name: 'n7', sex: 'f', hobby: 'h3' },
        { name: 'n8', sex: 'f', hobby: 'h3' },
        { name: 'n8', sex: 'f', hobby: 'h2' },
        { name: 'n9', sex: 'f', hobby: 'h1' },
        { name: 'n9', sex: 'f', hobby: 'h3' },
        { name: 'n9', sex: 'f', hobby: 'h2' },
        { name: 'n10', sex: 'm', hobby: 'h2' },
        { name: 'n10', sex: 'm', hobby: 'h3' },
        { name: 'n11', sex: 'm', hobby: 'h3' },
        { name: 'n11', sex: 'm', hobby: 'h2' },
        { name: 'n11', sex: 'm', hobby: 'h1' },
        { name: 'n12', sex: 'm', hobby: 'h3' },
        { name: 'n12', sex: 'm', hobby: 'h1' },
        { name: 'n13', sex: 'm', hobby: 'h2' },
        { name: 'n13', sex: 'm', hobby: 'h3' },
        { name: 'n13', sex: 'm', hobby: 'h1' },
        { name: 'n14', sex: 'f', hobby: 'h3' },
        { name: 'n14', sex: 'f', hobby: 'h1' },
        { name: 'n15', sex: 'f', hobby: 'h3' },
        { name: 'n15', sex: 'f', hobby: 'h1' },
        { name: 'n15', sex: 'f', hobby: 'h2' },
        { name: 'n16', sex: 'f', hobby: 'h3' },
        { name: 'n16', sex: 'f', hobby: 'h2' },
        { name: 'n16', sex: 'f', hobby: 'h1' }
    ];


    var seat = { seat: 16 };
    var start = { state: 'start' };

    var flow = nools.getFlow("manners"),
            Guest = flow.getDefined("guest"),
            LastSeat = flow.getDefined("lastSeat"),
            Context = flow.getDefined("context"),
            Count = flow.getDefined("count"),
            session = flow.getSession();

    for (var i = 0, l = guests16.length; i < l; i++) {
        session.assert(new Guest(guests16[i]));
    }
    session.assert(new LastSeat(seat));
    session.assert(new Context(start));
    session.assert(new Count({value: 1}));

    var start = new Date();
    console.profile();
    session.match().both(function () {
        console.profileEnd();
        document.getElementById("output").innerHTML += "Duration " + (new Date() - start) + "ms";
    });

}
</script>

</body>
</html>
